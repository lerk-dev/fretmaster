# 🎸 吉他指板视觉化练习工具  
**版本：v0.31  
**作者：lerk
**日期：2025-10-02**

---

## 📖 目录
1. [简介](#简介)  
2. [功能总览](#功能总览)  
3. [界面导览](#界面导览)  
4. [使用流程](#使用流程)  
5. [练习模式详解](#练习模式详解)  
6. [设置说明](#设置说明)  
7. [练习方法建议](#练习方法建议)  
8. [常见问题](#常见问题)  
9. [更新日志](#更新日志)  

---

## 简介
「吉他指板视觉化练习工具」是一款运行在浏览器里的**免费、离线、无广告**的吉他音阶/和弦/音程训练器。  
它通过**实时监听**吉他音频，即时判断你弹出的音是否正确，并在指板图上高亮显示，真正做到“**所见即所弹**”。

### 适用人群
- 想**背下整个指板**的初学者  
- 想**系统练习音阶、和弦、琶音**的中级玩家  
- 想**提速换把、熟悉 CAGED 系统**的高级玩家  
- 教学场景：老师可以投屏，学生跟着弹，对错一目了然  

### 技术亮点
- 采用 **CREPE + 自相关** 双算法融合，**低延迟**（< 60 ms）**高准确率**（> 98 %）  
- 支持 **USB 声卡**、**iRig**、**Focusrite** 等专业设备  
- 支持 **MIDI 键盘/控制器** 输入（实验功能）  
- 支持 **屏幕常亮**、**后台节拍器**、**背景闪光** 等练琴刚需  
- 纯前端实现，**无需注册、无需联网、数据本地存储**  

---

## 功能总览
| 模块 | 子功能 | 说明 |
|---|---|---|
| 🎵 音阶练习 | 30+ 调式 | Major、Minor、Dorian、Lydian ♭7、旋律小调、和声小调、五声音阶、布鲁斯、全音阶、异国音阶…… |
| 🎶 和弦练习 | 30+ 和弦类型 | Major、Minor、Dim、Aug、6、6/9、Sus2、Sus4、7、9、11、13、alt…… |
| 🔄 和弦进行 | 200+ 爵士标准曲 | All The Things You Are、Autumn Leaves、Giant Steps……内置真实和弦进行，可自定义 |
| 🎯 找音/音程 | 2 子模式 | ① 单音找音 ② 双音/三音/四音音程练习 |
| 🎸 CAGED 系统 | 3 练习模式 | ① 单形状 ② 形状连接 ③ 随机形状，可锁定根音/音阶 |
| 🎹 MIDI 输入 | 实验功能 | 插键盘即可弹，无需开系统音源 |
| ⚙️ 设备设置 | 增益、灵敏度、冷却时间、置信度、节拍器、语言、重置…… |
| 🌍 多语言 | 中文 / English | 一键切换，即时生效 |

---

## 界面导览
```
┌-------------------------------┐
|  🎸 吉他指板视觉化练习工具     |  ← 标题栏
|  [音阶练习] [和弦练习] [进行]  |  ← 底部导航（5 栏）
|  [找音练习] [设置]             |
└-------------------------------┘
```

### 主界面（设置页）
| 区域 | 元素 | 说明 |
|---|---|---|
| 顶部 | 状态指示灯 | 红=录音中，绿=就绪，灰=错误 |
| 中部 | 设置面板 | 根据底部导航切换 5 套面板 |
| 底部 | 开始练习按钮 | 进入全屏练习页 |

### 练习页（全屏）
| 区域 | 元素 | 说明 |
|---|---|---|
| 上 | 目标音阶/和弦名 | 大号字体，一眼看清 |
| 中 | 音级序列 | 当前音高高亮蓝底，已弹对变灰 |
| 下 | 下一题预览 | 提前知道下一个和弦/音阶 |
| 底 | 指板图 | 可选 12/15/18/24 品，实时点亮正确品位 |
| 侧 | 音高/音差/置信度 | 绿色=准，红色=偏，条形图=音量 |

---

## 使用流程
### 1. 准备工作
1. 调琴：标准音 A4 = 440 Hz  
2. 接线：  
   - 手机/电脑自带麦克风 → 安静环境即可  
   - USB 声卡 → 推荐，抗干扰强，延迟低  
3. 浏览器：Chrome/Edge 90+、Firefox 88+、Safari 14+  
4. 首次打开会弹麦克风授权 → 点「允许」

### 2. 选择练习模式
点击底部导航栏：
- 🎵 音阶练习  
- 🎶 和弦练习  
- 🔄 和弦进行  
- 🎯 找音/音程  
- ⚙️ 设置（设备、语言、节拍器）

### 3. 微调参数（可选）
| 参数 | 建议初值 | 说明 |
|---|---|---|
| 输入增益 | 100 % | 弹一下看指示灯是否跳动，太小就加，太大就减 |
| 灵敏度 | 0.5 | 越低越“严格”，越高越“灵敏” |
| 置信度阈值 | 0.5 | 低于此值视为“没弹响”，可避免环境噪音 |
| 冷却时间 | 600 ms | 弹对后多久进入下一音，练快句可降到 200 ms |
| 固定延迟 | 关 | 打开后每题强制等待 X ms，适合跟节拍器 |

### 4. 进入练习
- 点「开始练习」→ 屏幕常亮自动开启  
- 弹第一个音 → 序列第一个音级高亮 → 弹对变灰 → 自动跳到下一音  
- 全部完成 → 立即生成新题，循环往复  
- 随时按 **ESC** 或点击空白处返回主菜单

---

## 练习模式详解
### 🎵 音阶练习
#### 1. 选择根音 & 调式
- 根音：C ~ B，或 Random  
- 调式：下拉框分组展示，共 30+ 种  
- 例：选「D Dorian」→ 序列显示 `1 2 ♭3 4 5 6 ♭7`

#### 2. 选择方向
- 上行：1 → 2 → 3 → … → 1  
- 下行：1 → 7 → 6 → … → 1  
- 随机：顺序打乱，首尾仍是 1

#### 3. 选择练习序列（琶音）
- 1→1：完整音阶  
- 3→3：只弹 3 度音及其下行  
- 5→5 / 7→7 同理  
- random-arpeggio：随机挑 1 3 5 7 中的音做序列

#### 4. 实战示例
**目标**：把 C Major 指板背下来  
**设置**：Root = C | Mode = Major | Direction = 上行 | Sequence = 1→1  
**步骤**：
1. 从 6 弦 8 品开始弹 C  
2. 屏幕 1 高亮 → 弹对 → 自动跳到 2  
3. 按指型走到 1 弦 8 品结束  
4. 立即生成新调（如 F Lydian）→ 继续

---

### 🎶 和弦练习
#### 1. 选择和弦类型（可多选）
点击和弦块即选中，再点取消。至少选 1 个。

#### 2. 顺序
- 上行：根 → 三 → 五 → 七  
- 下行：七 → 五 → 三 → 根  
- 随机：顺序打乱

#### 3. 自定义和弦进行（进阶）
1. 打开「自定义和弦」开关  
2. 下拉框选根音+类型 → 点「添加和弦」  
3. 可拖动排序、删除、重命名  
4. 点「保存到本地」→ 下次打开自动读取  
5. 点「加载序列」→ 可导入/导出 JSON 文件，方便分享

#### 4. 实战示例
**目标**：练 Maj7 琶音所有把位  
**设置**：Root = Random | Types = Maj7 | Order = 上行  
**步骤**：
- 屏幕出现「E♭Maj7」→ 从 6 弦 11 品弹 E♭  
- 依次弹 1 3 5 7 → 全对后自动生成「A♭Maj7」→ 继续  
- 10 分钟后已覆盖 12 个调所有把位

---

### 🔄 和弦进行（爵士标准曲）
#### 1. 选曲
下拉框按字母分组，共 200+ 首：
- 入门：Autumn Leaves、All of Me  
- 进阶：Giant Steps、Countdown  
- 冷门：Very Early、Infant Eyes

#### 2. 选级别（单音→四音）
| 级别 | 含义 | 示例 |
|---|---|---|
| 1 | 只弹根音 | All The Things You Are：C → Ab → F → D |
| 1,3 | 根+三 | C+E → Ab+C → F+A → D+F♯ |
| 1,3,5 | 三和弦 | C+E+G → Ab+C+Eb … |
| 1,3,5,7 | 七和弦 | C+E+G+B → Ab+C+Eb+G … |
| 随机转位 | 每小节随机顺序 | 如 5→1→3→7 |

#### 3. 选调
- 原调：按曲目原始调性  
- 随机：每次生成新调，练移调

#### 4. 实战示例
**目标**：把《Autumn Leaves》ii-V-I 背下来  
**设置**：Tune = Autumn Leaves | Level = 1,3,5,7 | Key = 原调 | Order = 顺序  
**步骤**：
- 第 1 小节：Am7 → 屏幕显示「A C E G」→ 弹对后进下一小节  
- 全程 32 小节走完 → 自动生成新调（如 B♭）→ 继续移调练习

---

### 🎯 找音/音程练习
#### 1. 单音找音
- 屏幕随机出现「F♯」  
- 你在任意弦任意品弹 F♯ → 指板立即点亮所有 F♯ 位置 → 2 秒后下一题  
- 可设练习时长（1~30 min）与是否显示指板

#### 2. 音程练习
- 屏幕出现「♭6」+「7」  
- 你先弹根音（随机给）→ 再弹 ♭6 → 再弹 7 → 全部正确后进入下一题  
- 可设「先找根音」开关：强制先弹根音，再弹音程

#### 3. 实战示例
**目标**：一眼认出任意弦的 ♭3  
**设置**：Mode = 音程 | Intervals = ♭3 | Root = Random | Find Root First = 开  
**步骤**：
- 屏幕：「当前音符 E」→ 你弹 6 弦空弦 → 再弹 6 弦 3 品（G）→ 对 → 下一题  
- 10 分钟后，看到任意弦都能瞬间找到 ♭3

---

### 🎸 CAGED 系统（隐藏大招）
#### 1. 开启
设置页 → CAGED 练习 → 打开开关 → 选择形状（默认全选）

#### 2. 练习模式
- 单形状：一次只练 C 形状，走遍 12 调  
- 形状连接：C→A→G→E→D 无缝连接，练换把  
- 随机形状：随机跳把，模拟即兴

#### 3. 显示选项
- 显示指板：实时画出当前形状框  
- 显示指法：1-2-3-4 手指数字  
- 显示音阶：在框内标出音级 1-2-3-…

#### 4. 实战示例
**目标**：把 C Major 的 5 个形状串起来  
**设置**：Mode = 形状连接 | Key = C | Scale = Major | Show = 全勾  
**步骤**：
- 第 1 题：C 形状（8 品起）→ 弹完 1→2→3→…→1 → 自动跳到 A 形状  
- 第 2 题：A 形状（5 品起）→ 弹完 → 跳到 G 形状 …  
- 走完 5 形状 → 生成新调（如 G）→ 继续

---

## 设置说明
| 分组 | 设置项 | 取值范围 | 默认值 | 说明 |
|---|---|---|---|---|
| 音频输入 | 设备 | 下拉 | 默认 | 自动列出 USB 声卡、iRig、板载麦 |
|  | 增益 | 0~200 % | 100 % | 实时条显，避免红灯爆音 |
|  | 灵敏度 | 0.1~1.0 | 0.5 | 越小越“严格”，抗干扰；越大越“灵敏”，易触发 |
|  | 置信度 | 0.3~0.9 | 0.5 | 低于此值视为“没响”，过滤噪音 |
| 练习 | 冷却时间 | 200~3000 ms | 600 ms | 弹对后强制等待，练快速换把可关 |
|  | 固定延迟 | on/off | 关 | 打开后每题固定等待 X ms，跟节拍器用 |
| 节拍器 | 开关 | on/off | 关 | 后台线程，不占录音 |
|  | 速度 | 20~120 bpm | 40 | 每拍闪屏+嘀声 |
|  | 闪光 | on/off | 开 | 整屏闪白，练琴房太吵时可用 |
|  | 声音 | on/off | 开 | 892 Hz 嘀声，不干扰检测 |
| 语言 | 界面语言 | 中文/English | 自动 | 切换立即生效，下次记住 |
| 高级 | 重置所有 | 按钮 | — | 一键恢复出厂，不会删自定义和弦 |

---

## 练习方法建议
### 14 天「指板全背」计划（每日 20 min）
| 天数 | 模式 | 内容 | 目标 |
|---|---|---|---|
| 1-2 | 音阶 | C Major 上行 1→1 | 6 弦→1 弦 一口气弹对 |
| 3-4 | 音阶 | G Major 随机琶音 | 任意起音都能接 |
| 5-6 | 和弦 | Maj7 1,3,5,7 | 12 调 1 把位 |
| 7-8 | 和弦 | ii-V-I 进行 | 原调→降二降五 |
| 9-10 | 找音 | 单音 1 min | 看到「F♯」0.5 s 内弹出 |
| 11-12 | 音程 | 3、♭3、5 | 任意弦给出根音即弹 |
| 13 | CAGED | C→A→G→E→D 连接 | 无断点 90 bpm |
| 14 | 混合 | Random Root + Random Mode | 综合准确率 > 90 % |

### 节拍器使用技巧
- 初练：40 bpm，一音一拍，确保干净触发  
- 提速：每 2 分钟 +2 bpm，直到 120 bpm  
- 闪灯：练琴房吵→关声音→开闪光，余光即可看拍

### USB 声卡最优延迟设置
1. 声卡驱动面板 → 缓冲区 64 sample  
2. 浏览器地址栏输入 `chrome://flags/#enable-low-latency` → Enabled  
3. 刷新本页 → 设置 → 冷却时间 200 ms → 开节拍器 60 bpm  
4. 实测延迟 < 50 ms，换把无感

---

## 常见问题
| 问题 | 排查步骤 |
|---|---|
| 麦克风被拒 | 地址栏左侧🔒→麦克风→允许→刷新 |
| 识别不准 | ①调音 ②增益 80~120 % ③灵敏度 0.4 ④置信度 0.6 |
| 延迟高 | ①USB 声卡 ②缓冲区 64 ③关其他 TAB |
| 节拍器没声 | ①开「声音节拍」②音量调大 ③iOS 需先点屏幕再开始 |
| 自定义和弦丢失 | ①点「保存到本地」②清浏览器数据会丢，可导出 JSON 备份 |
| MIDI 没反应 | ①Chrome/Edge ②先插键盘再开页面 ③开「MIDI 设备」开关 |

---

## 更新日志
| 版本 | 日期 | 说明 |
|---|---|---|
| 0.31 | 2025-10-02 | 首发：音阶、和弦、进行、找音、CAGED、MIDI、多语言、节拍器、本地存储 |

---

## 致谢
- 音高检测：CREPE / ml5.js 社区  
- 图标：EmojiOne / Twemoji  
- 爵士标准曲和弦：Real Book 公共版本整理  


---

## 开源 & 反馈
- 源码：GitHub 搜索 `fretmaster`  
- 反馈：Issues 或邮箱 `lerk@163.com`  
- 欢迎 PR：新曲谱、新语言、新功能！

---

**Happy Practicing! 🎸**  
愿你早日「一眼指板，张口音阶」！
